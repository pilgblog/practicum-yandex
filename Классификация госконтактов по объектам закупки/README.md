# ЦДО МГТУ им.Баумана
## Задача: необходимо на основе данных с ftp.zakupki.gov.ru научиться определять группу, к которой относится контракт с кодом ОКПД-2 41, 42, 43, 71.1.
Группы могут быть следующими:

    Строительно-монтажные работы (СМР)
    Проектно-изыскательские работы (ПИР)
    Строительный надзор
    Подключение коммуникаций
    Прочее.

По ОКПД-2 контракты в общем случае должны разделяться так:

    Строительно-монтажные работы (СМР) - 41, 42, 43(кроме нижеперечисленных)
    Проектно-изыскательские работы (ПИР) - 41.1, 71.1
    Подключение коммуникаций - 43.22
    Строительный надзор – четкой группы нет.

Проблема: Далеко не всегда контракты указываются с нужным кодом, поэтому есть проблема как такие контракты "отловить" и определить в нужную группу.

Поэтому задача предполагает классификацию контрактов на основе объекта закупки, который сформулирован естественным языком. Также предполагаем, что могут иметь значение цена контракта и его длительность. На основе этого на входе данные о контрактах. На выходе необходимо получить группу для каждого контракта.

Иногда контракт может относиться одновременно в несколько групп.

В приложении ниже пример нескольких контрактов, у которых неверно проставлен ОКПД-2.

## Отчет

    Загрузка csv файла объемом 25Гб. Поскольку файл не помещался в памяти, было приняло решение загрузить его в базу данных. В процессе загрузки данные загружались порциями, при возникновении исключений, строка отбрасывалась. В базу данных загружала только необходимые признаки:

    contract_number (номер контракта),
    object_name (наименование услуги),
    object_code (код услуги),
    cost (стоимость),
    contract_execution_days (длительность контракта в днях - рассчитывался как разница дат начала и окончания контракта).

    Провела разведочный анализ данных. Сделал очистку данных от дублей и пропусков, а также от пустых строк и латинских символов.

    Для выполнения классификации по наименованию услуги был выполнен NLP процесс (токкенизация, лемматизация, стеминг, удаление стоп слов и знаков пунктуации).

    К полученным признакам добавлены стоимость за день и длинные по дням котракты, а так же выделен целевой признак группа контракта. Группа была закодирована с помощью LabelEncoder. Признаки были нормализованы с помощью MinMaxScaler.

Было соотнесено номер контракты по группам с помощью группировки, но полученные группы не совсем соответствуют группам по условию. Возможно, необходимо либо пересмотреть группировку кодов и обратится за помощью к специалисту из предметной области для уточнения ТЗ. 

Выполнена задача по классификации определения группы, к которой относится контракты. Классификация была выполнена с использованием разных моделей:

    SVC классификатора опорных векторов.
    Наивный байесовский классификатор.
    Классификатор дерева решений.
    Многослойный классификатор персептронов

Как показали эксперименты, лучше всего показала классическая модель машинного обучения - модель SVC классификатора опорных векторов. Она показала лучшую точность 0.58.

Есть ошибки в неправильной классификации. Возможно необходимо уточнить в ТЗ правильность группировки кодов ОКПД-2.

## Вывод

Анализ датасета показал, что он не размечен, нет признаков явно указывающих, какой код и группа верные, а какой нет. Поэтому, можно провести разметку, прибегнув к кластеризации.

Если предположить, что количество некорректных кодов ОКПД-2 большое, тогда можно выполнить кластеризацию данных по столбцу с описанием контракта. На основе полученной кластеризации, получаем размеченные данные, с помощью которых, можно обучить модель классификации с учетом стоимости и длительности исполнения контракта.

Выполнена задача по классификации определения группы, к которой относится контракт с кодом ОКПД-2. В качестве модели выбрала алгоритм SVC классификатора опорных векторов. В результате проделанной работы был разработан классификатор групп кодов ОКПД-2 с точность предсказания 0.58, что соответствует заданию.
